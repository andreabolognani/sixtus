#!/usr/bin/python
# -*- encoding: utf-8 -*-

from __future__ import print_function
import sys

if len(sys.argv) != 8:
	params = ['<input file>', '<pag file>', '<list file>',
		'<relation file>', '<names file>',
		'<this year>', '<this month>']
	print('Usage: %s %s' % (sys.argv[0], ' '.join(params)), file=sys.stderr)
	sys.exit(1)

input_file  = sys.argv[1]
pag_file    = sys.argv[2]
list_file   = sys.argv[3]
rel_file    = sys.argv[4]
name_file   = sys.argv[5]
this_year   = sys.argv[6]
this_month  = sys.argv[7]

from relater import Relater
from poster import Poster

r = Relater(rel_file, name_file)
r.relate(this_year, this_month)

p = Poster(r.this_page, r.prev_page, r.next_page)
p.parse_file(input_file)
p.output_pag_file(pag_file)
p.output_list_file(list_file)
