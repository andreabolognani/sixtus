#!/usr/bin/python
# -*- encoding: utf-8 -*-

import sys
import re

print sys.argv

input_file  = sys.argv[1]
output_file = sys.argv[1]

this_year  = sys.argv[3]
this_month = sys.argv[4]

class Poster:

	def __init__ (self, year, month):

		self.year = year
		self.month = month
		self.check = re.compile(r'^post#')

	def parse_file (self, filename):
		with open(filename) as f:
			for i in f:
				line = i.strip()

				if len(line) == 0:
					print line
					continue

				if line[0] == '#':
					print
					continue

				if self.check.match(line):

					token = line.split('#')
					size = len(token)

					print('tab#%s' % token[1])
					print('p#%s/%s/%02d' % (this_year, this_month, int(token[1])))
					if size == 4:
						print('\t/ %s' % token[3])
					if size > 4:
						print('\t/ %s &amp; %s' % (', '.join(token[3:-1]), token[-1]))
					print('title#%s' % token[2])
					continue

				print line

	def output_post_file (self, filename):

		print('title#%s %s' % (self.month, self.year))

p = Poster(this_year, this_month)
p.parse_file(input_file)

sys.exit(1)
