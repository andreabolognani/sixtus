#!/usr/bin/python
# -*- encoding: utf-8 -8-

from __future__ import print_function
import sys

if len(sys.argv) < 6:
	params = ['<output file>',
		'<blog rel file>', '<blog names file>',
		'<this year>', '<months list filesâ€¦>']
	print('Usage: %s %s' % (sys.argv[0], ' '.join(params)))
	sys.exit(1)

outfile   = sys.argv[1]
this_year = sys.argv[2]
relfile   = sys.argv[3]
namefile  = sys.argv[4]

print()
print()
print(sys.argv)
print()

page = []
side = []
for filename in sys.argv[5:]:
	side.append(filename.split('/')[-1].split('.')[0])
	with open(filename, 'r') as f:
		page.append(f.read())

with open(relfile, 'r') as f:
	rel_list = eval(f.read())

with open(namefile, 'r') as f:
	name_map = eval(f.read())

#with sys.stdout as f:
f = sys.stdout
if True:

	print('title#%s' % this_year, file=f)
	print('subtitle#%s' % ('News from the year %s' % this_year), file=f)
	print('prev#%s#%s', file=f)
	print('next#%s#%s', file=f)

	print('start#page', file=f)
	print('br#\n'.join(page), file=f)

	print('start#side', file=f)
	for i in side:
		print('p#link##%s#%s-%s' % ('Name', this_year, i), file=f)

print()

sys.exit(1)
